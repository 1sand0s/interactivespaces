<projectGroup>

  <prototypes>
    <prototype prototypeName="commonVars">
      <templateVars>
        <var name="groupSeparatorIndex" value="${baseDirectory?last_index_of('/')}" />
        <var name="groupName" value="${baseDirectory?substring(groupSeparatorIndex?number + 1)}" />
      </templateVars>
    </prototype>

    <prototype prototypeName="baseProject" inheritsFrom="commonVars" interactiveSpacesVersion="1.0.0">
      <templateVars>
        <var name="idName" value="${groupName}" />
        <var name="fullName" value="${idName?replace('.', ' ')?capitalize}" />
        <var name="resourceDir" value="${activity.getActivitySourceDirectory()}" />
        <var name="pythonExecutable" value="SimplePythonActivity.py" />
      </templateVars>

      <version>0.0.1</version>
      <name>${fullName}</name>
      <identifyingName>${idName}</identifyingName>
      <description>Auto-generated activity for ${fullName}</description>
    </prototype>

    <prototype prototypeName="activityProject" inheritsFrom="baseProject">
      <activity type="interactivespaces_native">
        <name>${fullName}</name>
        <executable>${pythonExecutable}</executable>
        <configuration>
          <property name="space.activity.log.level" value="info" required="false" />
        </configuration>
      </activity>
      <templates>
        <template destinationFile="project.xml" sourceFile="${internalTemplates}/project.xml.ftl" />
      </templates>
    </prototype>
  </prototypes>

  <!-- TODO: Need to specify the activity type (script) and then executable name as configuration value -->
  <projects>
    <project inheritsFrom="activityProject" type="activity">
      <templates>
        <template destinationFile="${resourceDir}/${pythonExecutable}" sourceFile="SimplePythonActivity.py.ftl" />
      </templates>
    </project>
  </projects>
</projectGroup>
