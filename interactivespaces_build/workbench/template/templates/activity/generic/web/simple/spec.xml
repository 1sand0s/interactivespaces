<projectGroupTemplateSpecification>

  <prototypes>
    <prototype prototypeName="commonVars">
      <templateVars>
        <var name="groupSeparatorIndex" value="${baseDirectory?last_index_of('/')}" />
        <var name="groupName" value="${baseDirectory?substring(groupSeparatorIndex?number + 1)}" />
      </templateVars>
    </prototype>

    <prototype prototypeName="baseProject" inheritsFrom="commonVars" interactiveSpacesVersion="1.0.0">
      <templateVars>
        <var name="idName" value="${groupName}" />
        <var name="fullName" value="${idName?replace('.', ' ')?capitalize}" />
        <var name="resourceDir" value="${activity.getActivityResourceDirectory()}" />
        <var name="javascriptExecutable" value="SimpleJavascriptActivity.js" />
      </templateVars>

      <version>0.0.1</version>
      <name>${fullName}</name>
      <identifyingName>${idName}</identifyingName>
      <description>Auto-generated activity for ${fullName}</description>
    </prototype>

    <prototype prototypeName="activityProject" inheritsFrom="baseProject" builder="java">
      <activity type="interactivespaces_native">
        <name>${fullName}</name>
        <class>${javascriptExecutable}</class>
        <configuration>
          <property name="space.activity.log.level" value="info" required="false" />
        </configuration>
      </activity>
      <templateComponents>
        <templateFile destinationFile="project.xml" sourceFile="${internalTemplates}/project.xml.ftl" />
      </templateComponents>
    </prototype>
  </prototypes>

  <projects>
    <project inheritsFrom="activityProject" type="activity">
      <templateComponents>
        <templateFile destinationFile="${resourceDir}/${javascriptExecutable}" sourceFile="SimpleJavascriptActivity.js.ftl" />
      </templateComponents>
    </project>
  </projects>
</projectGroupTemplateSpecification>
